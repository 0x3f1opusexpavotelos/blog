# windows terminal + wsl2 + ohmyzsh


## Install and set up zsh as default
Oh My Zsh is a framework for Zsh, the Z shell.
In order for Oh My Zsh to work, Zsh must be installed.
- Please run zsh --version to confirm.
- Expected result: zsh 5.0.8 or more recent

Additionally, Zsh should be set as your default shell.

- Please run echo $SHELL from a new terminal to confirm.
- Expected result: /usr/bin/zsh or similar

- Make zsh your default shell: `chsh -s $(which zsh)`

- type `exit` to log out current terminal session
open a new terminal tab or windows to log back again.

- Test that it worked with echo $SHELL. Expected result: /bin/zsh or similar.
- Test with $SHELL --version. Expected result: 'zsh 5.8' or similar
- To install a package without root access, 

```sh
# 新建用户组
sudo groupadd apt
# 为指定用户组`apt` 赋予apt相关目录的访问权限
sudo chgrp -R apt /usr/bin/apt
# 追加用户组
$ sudo apt install acl
$ sudo setfacl -R -m g:apt:rx /usr/bin/apt
-rwxr-xr-x+ 1 root root  /usr/bin/apt
$ getfacl /usr/bin/apt
# file: usr/bin/apt
# owner: root
# group: root
user::rwx
group::r-x
group:apt:r-x
# 将你的用户添加到 apt-users 组：
$ sudo usermod -aG apt $USER
# 及其所有子目录和文件的组权限添加执行权限
sudo chmod -R g+x /usr/bin/aptnvi 
# 文件下载
sudo apt install wget curl neovim
```

```sh
$ echo "use_proxy = on" >> ~/.wgetr
$ echo "http_proxy = http://127.0.0.1:7897" >> ~/.wgetrc
$ cat ~/.wgetrc
use_proxy = on
http_proxy = http://127.0.0.1:7897


$ nvim ~/.zshrc
$ source ~/.zshrc
$ more ~/.zshrc
export http_proxy=http://127.0.0.1:7897
export https_proxy=https://127.0.0.1:7897
export all_proxy=socks5:127.0.0.1:7897

# temp disable 
export http_proxy=
export https_proxy=
export all_proxy=

$ nvim /etc/hosts
# raw github
185.199.108.133  raw.githubusercontent.com
185.199.109.133  raw.githubusercontent.com
185.199.110.133  raw.githubusercontent.com
185.199.111.133  raw.githubusercontent.com

env | grep -i proxy
```
## network connection troubleshooting


wsl 
```sh
$ more /etc/resolv.conf
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to
/etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 192.168.208.1

vEthernet（虚拟以太网接口）
有Hyper-V或WSL创建用于虚拟网连接

➜  ~ more ~/.zshrc
export http_proxy="192.168.208.1:7897"
export https_proxy="192.168.208.1:7897"
export all_proxy="192.168.208.1:7897"
```


## file transfer


```sh
➜  ~ ls -ld /mnt/*
drwxrwxrwx 1 root root 4096 Nov 26 17:18 /mnt/c
drwxrwxrwx 1 root root 4096 Nov 26 17:18 /mnt/d
drwxrwxrwx 1 root root 4096 Nov 26 17:18 /mnt/e
drwxrwxrwt 2 root root   60 Nov 20 16:47 /mnt/wsl
```


## awesome tools

neovim

neofetch: system information tool 


```sh
neofetch
# zsh specific
# prepend 
path=('/home/office/.local/bin' $path)
# append
path+=('/home/office/.local/bin')
# 
export PATH=/home/office/bin:$PATH
eval "$(oh-my-posh init zsh)"
```

字体
```sh

> scoop search FantasqueSansMono-NF
> scoop bucket add 'nerd-fonts'
# 下面一个命令要加 sudo 提权
> sudo scoop install FantasqueSansMono-NF
```


## 查看executable安装路径


clones the nvm repository to ~/.nvm
```sh
$ command -v node
/bin/node
$ command -v npm
/mnt/c/Program Files/nodejs//npm
```

